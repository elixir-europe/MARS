---
import Layout from '../layouts/Layout.astro';
import model from '../schemas/isa_json_schema_with_validators.json';
import SchemaTable from '../components/SchemaTable.astro';

// Prepare data in frontmatter (JS/TS allowed here)
function returnModel(modelName: string, schemaDefinitions: [Record<string, any>]) {
    const model = schemaDefinitions.find(
        (def) => def.title === modelName
    );

}

const schema = model.schema ?? {};
const schemaDefs = schema.$defs ?? [];
const properties = Object.entries((schema.properties ?? {}) as Record<string, any>);

// Only uncomment for debugging purposes
// console.log({ schema, schemaDefs, properties });
---
<Layout>
  <h2 class="text-5xl font-semibold tracking-tight text-white sm:text-7xl">ISA-JSON model</h2>
  {
      Object.entries(schemaDefs).map(([key, schemadefinition]: any) => {
          return <SchemaTable title={key} schema={schemadefinition} />;
      })
  }
</Layout>